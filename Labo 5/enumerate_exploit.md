# Scan Enumerate Exploit

## Setup

Create two linked clones of the Debian CLI router. As MAC-policy choose: "Generate new Mac address for all network adapters". Leave the other checks blank. Change the settings and remove the second network adapter. The first adapter has to be Host-Only and make sure you set up the right one, check labo 2 for more information.

Change the MAC-addresses in the cloned machines:

First clone: `DCA632DCBA21`

Second clone: `000393AB12CD`

To receive everything from DHCP, change the IP configuration. Go to `/etc/network/interfaces.d/enp0s8` and replace `static` to `dhcp`.

After that disable DHCP, DNS and nftables:

```console
sudo systemctl stop named
sudo systemctl disable named
sudo systemctl stop nftables
sudo systemctl disable nftables
sudo systemctl stop isc-dhcp-server
sudo systemctl disable isc-dhcp-server
```

Do this on both clones.

On the first clone, increase the memory up to 4GB with VBoxManage. Open een Powershell-terminal as an administrator. And run this command:

`VBoxManage.exe modifyvm <Name-Clone1> --memory 4096`

Boot all the available machines: Debian CLI, Kali, Windows 10, Debian CLI Clone and Debian CLI Clone 2.

Install docker on the first clone.

`sudo apt update`

`sudo apt upgrade -y`

Install some specific packets:

`sudo apt install -y ca-certificates curl gnupg lsb-release`

Add docker GPG key:

`sudo install -m 0755 -d /etc/apt/keyrings`

`curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg`

`sudo chmod a+r /etc/apt/keyrings/docker.gpg`

Add docker repo:

`echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null`

Install docker:

`sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin`

Run the following docker command:

```console
sudo docker run --detach --hostname gitlab-docker --publish 80:80 --publish 443:443 --publish 2222:22 --name gitlab-docker --restart always --volume /opt/gitlab-docker/config:/etc/gitlab --volume /opt/gitlab-docker/logs:/var/log/gitlab --volume /opt/gitlab-docker/:/var/opt/gitlab --shm-size 256m gitlab/gitlab-ce:13.8.7-ce.0
```
